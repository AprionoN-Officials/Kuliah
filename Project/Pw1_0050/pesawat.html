<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tiket Pesawat Was Wes Wos..</title>
  <style>
    body{
      margin:0;
      background: url('img/pesawat-bg.jpg') no-repeat center center fixed;
      font-family: Arial, sans-serif;
    }
    table, fieldset {
      background: rgba(255,255,255,0.92);
    }
  </style>
</head>
<body>
  <h3 align="center">Tiket Pesawat Was Wes Wos..</h3>

  <table border="1" cellpadding="8" cellspacing="0" align="center" width="900">
    <tr>
      <td valign="top" width="50%">
        <fieldset>
          <legend>Data Pemesanan</legend>
          <table>
            <tr>
              <td>Nama</td>
              <td><input type="text" id="nama" size="30" placeholder="Nama penumpang" /></td>
            </tr>
            <tr>
              <td>Bandara Asal</td>
              <td>
                <select id="asal">
                  <option value="Jakarta">Jakarta</option>
                  <option value="Bandung">Bandung</option>
                  <option value="Yogyakarta">Yogyakarta</option>
                  <option value="Surabaya">Surabaya</option>
                </select>
              </td>
            </tr>
            <tr>
              <td>Bandara Tujuan</td>
              <td>
                <select id="tujuan">
                  <option value="Jakarta">Jakarta</option>
                  <option value="Bandung">Bandung</option>
                  <option value="Yogyakarta">Yogyakarta</option>
                  <option value="Surabaya">Surabaya</option>
                </select>
              </td>
            </tr>
            <tr>
              <td>Kelas</td>
              <td>
                <select id="kelas">
                  <option value="Eksekutif">Eksekutif</option>
                  <option value="Bisnis">Bisnis</option>
                  <option value="Ekonomi">Ekonomi</option>
                </select>
              </td>
            </tr>
            <tr>
              <td>Jumlah Tiket</td>
              <td><input type="number" id="jumlah" min="1" value="1" /></td>
            </tr>
            <tr>
              <td>Member</td>
              <td>
                <label><input type="radio" name="member" value="Platinum" /> Platinum</label>
                <label><input type="radio" name="member" value="Gold" /> Gold</label>
                <label><input type="radio" name="member" value="Silver" /> Silver</label>
              </td>
            </tr>
          </table>
        </fieldset>
      </td>

      <td valign="top" width="50%">
        <fieldset>
          <legend>Ringkasan</legend>
          <table>
            <tr>
              <td>Nama Penumpang</td>
              <td><input type="text" id="outNama" size="30" readonly /></td>
            </tr>
            <tr>
              <td>Harga Tiket</td>
              <td><input type="text" id="harga" size="30" readonly /></td>
            </tr>
            <tr>
              <td>Sub Total</td>
              <td><input type="text" id="subtotal" size="30" readonly /></td>
            </tr>
            <tr>
              <td>Potongan</td>
              <td><input type="text" id="potongan" size="30" readonly /></td>
            </tr>
            <tr>
              <td>Total</td>
              <td><input type="text" id="total" size="30" readonly /></td>
            </tr>
          </table>
        </fieldset>
      </td>
    </tr>
  </table>

  <div align="center" style="margin-top:10px">
    <button id="confirmBtn">CONFIRM</button>
    <button id="resetBtn" type="button">Reset</button>
  </div>

  <br/>

  <div align="center">
    <h4>Tarif Rute Pesawat (harga per tiket)</h4>
    <table border="1" cellpadding="6" cellspacing="0">
      <tr>
        <th></th>
        <th>Jakarta</th>
        <th>Bandung</th>
        <th>Yogyakarta</th>
        <th>Surabaya</th>
      </tr>
      <tr>
        <th>Jakarta</th>
        <td>-</td><td>400.000</td><td>500.000</td><td>600.000</td>
      </tr>
      <tr>
        <th>Bandung</th>
        <td>400.000</td><td>-</td><td>450.000</td><td>550.000</td>
      </tr>
      <tr>
        <th>Yogyakarta</th>
        <td>500.000</td><td>450.000</td><td>-</td><td>400.000</td>
      </tr>
      <tr>
        <th>Surabaya</th>
        <td>600.000</td><td>550.000</td><td>400.000</td><td>-</td>
      </tr>
    </table>

    <br/>
  </div>

  <script>
    // Tabel harga rute (per tiket)
    const routePrice = {
      "Jakarta":   { "Jakarta": 0, "Bandung": 400000, "Yogyakarta": 500000, "Surabaya": 600000 },
      "Bandung":   { "Jakarta": 400000, "Bandung": 0, "Yogyakarta": 450000, "Surabaya": 550000 },
      "Yogyakarta":{ "Jakarta": 500000, "Bandung": 450000, "Yogyakarta": 0, "Surabaya": 400000 },
      "Surabaya":  { "Jakarta": 600000, "Bandung": 550000, "Yogyakarta": 400000, "Surabaya": 0 }
    };

    // Biaya kelas (ditambah sekali per transaksi)
    const classFee = { "Eksekutif": 150000, "Bisnis": 100000, "Ekonomi": 50000 };

    // Potongan member (dikurang sekali per transaksi)
    const memberDiscount = { "Platinum": 150000, "Gold": 100000, "Silver": 50000, "-": 0 };

    const el = id => document.getElementById(id);
    const rp = n => "Rp " + (Math.round(n)||0).toLocaleString("id-ID");

    function getSelectedMember() {
      const r = document.querySelector('input[name="member"]:checked');
      return r ? r.value : "-";
    }

    function getTicketPrice(asal, tujuan){
      const row = routePrice[asal] || {};
      return row[tujuan] || 0;
    }

    document.getElementById("confirmBtn").addEventListener("click", () => {
      const nama = el("nama").value.trim();
      const jumlah = parseInt(el("jumlah").value, 10);
      if (!nama) { alert("Nama tidak boleh kosong."); return; }
      if (!jumlah || jumlah < 1) { alert("Jumlah Tiket tidak boleh kosong atau kurang dari 1."); return; }

      const asal = el("asal").value;
      const tujuan = el("tujuan").value;
      if (asal === tujuan) { alert("Asal dan Tujuan tidak boleh sama."); return; }

      const kelas = el("kelas").value;
      const member = getSelectedMember();

      const harga = getTicketPrice(asal, tujuan);    // per tiket
      const biayaKelas = classFee[kelas] || 0;       // sekali per transaksi
      const subtotal = (harga * jumlah) + biayaKelas;
      const potongan = memberDiscount[member] || 0;  // sekali per transaksi
      const total = Math.max(0, subtotal - potongan);

      el("outNama").value = nama;
      el("harga").value = rp(harga);
      el("subtotal").value = rp(subtotal);
      el("potongan").value = rp(potongan);
      el("total").value = rp(total);
    });

    document.getElementById("resetBtn").addEventListener("click", () => {
      el("nama").value = "";
      el("asal").selectedIndex = 0;
      el("tujuan").selectedIndex = 0;
      el("kelas").selectedIndex = 0;
      el("jumlah").value = 1;
      document.querySelector('input[name="member"][value="-"]').checked = true;
      ["outNama","harga","subtotal","potongan","total"].forEach(id => el(id).value = "");
    });
  </script>
</body>
</html>